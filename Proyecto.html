<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment+3D model</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
</head>
<body>
    <a-scene>

        <!-- Se carga el asset del apartamento (obj y mtl) y la textura del cielo-->
        <a-assets>
            <a-asset-item id="casa" src="assets/Base3/apto3.obj"></a-asset-item>
            <a-asset-item id="mtlCasa" src="assets/Base3/apto3.mtl"></a-asset-item>

            <a-asset-item id="cuna" src="assets/Cuna/cuna.obj"></a-asset-item>
            <a-asset-item id="mtlcuna" src="assets/Cuna/cuna.mtl"></a-asset-item>

            <a-asset-item id="cortina" src="assets/Cortina/Cortinas.obj"></a-asset-item>
            <a-asset-item id="mtlcortina" src="assets/Cortina/Cortinas.mtl"></a-asset-item>

            <a-asset-item id="cama" src="assets/Cama/cama_princ.obj"></a-asset-item>
            <a-asset-item id="mtlcama" src="assets/Cama/cama_princ.mtl"></a-asset-item>

            <a-asset-item id="mesita" src="assets/mesita/mesita.obj"></a-asset-item>
            <a-asset-item id="mesitaMtl" src="assets/mesita/mesita.mtl"></a-asset-item>

            <a-asset-item id="isla" src="assets/Isla_cocina/isla.obj"></a-asset-item>
            <a-asset-item id="islaMtl" src="assets/Isla_cocina/isla.mtl"></a-asset-item>

            <a-asset-item id="lamparas" src="assets/Lamparas/Lamparas.obj"></a-asset-item>
            <a-asset-item id="lamparasMtl" src="assets/Lamparas/Lamparas.mtl"></a-asset-item>

        </a-assets>

        <!-- Se agregan físicas a la cámara-->
        <a-entity id="rig" movement-controls="constrainToNavMesh: true">
            <a-entity camera
                          position="0 0.6 0"
                          look-controls="pointerLockEnabled: true"
                          ></a-entity>
            </a-entity>

        <!-- Se crea la entidad que contiene el obj y el mtl, se escala y se le agregan colisiones-->  
        <a-entity obj-model="obj: #casa; mtl: #mtlCasa" scale="0.1, 0.1, 0.1" position="0 0 0" ></a-entity>
        <a-entity obj-model="obj: #cuna; mtl: #mtlcuna" scale="1, 0.538, 0.715" position="-3.291 1.391 1.946" ></a-entity>
        <a-entity obj-model="obj: #cortina; mtl: #mtlcortina" scale="0.5, 0.5, 0.5" position="-2.327 1.495 -1.502" rotation="0 90 0"></a-entity>
        <a-entity obj-model="obj: #cama; mtl: #mtlcama" scale="0.390, 0.390, 0.390" rotation="0 90 0" position="-0.622 1.464 -1.244" ></a-entity>
        <a-entity obj-model="obj: #mesita; mtl: #mesitaMtl" scale="0.1, 0.1, 0.1" position="0 0 0" ></a-entity>
        <a-entity obj-model="obj: #lamparas; mtl: #lamparasMtl" scale="0.010, 0.010, 0.010" position="-3.219 1.707 1.112" ></a-entity>
        
        
        <!-- Se carga el ambiente: Sonido y textura del cielo-->
        <a-sound src="Assets/Sonidos/Ambiente.mp3" autoplay="true" position="0 2 5" loop: true volume: 5></a-sound>
        <a-sky src= "#skyTexture"></a-sky>

        <!-- Se agregan luces-->
        <a-entity light="type: point; intensity: 0.20; distance: 50; decay: 2"
          position="2 1 -1"></a-entity>
        <a-entity light="type: point; intensity: 0.20; distance: 50; decay: 2"
          position="-2.7 2.5 1.4"></a-entity>  
          <a-entity light="type: directional; color: blue; intensity: 0.05; distance: 2; decay: 0.5"
          position="0.027 0.4 -1.556"></a-entity>
          <a-entity light="type: directional; color: blue; intensity: 0.05; distance: 2; decay: 0.5"
          position="0.027 0.4 -0.992"></a-entity>
          <a-entity light="type: directional; color: blue; intensity: 0.05; distance: 2; decay: 0.5"
          position="0.027 0.4 -0.483"></a-entity>
        <a-entity light="type: directional; color: white; intensity: 0.6" position="5 1 3"></a-entity>
        <a-entity light="type: ambient; color: white; intensity: 0.4" position="10 10 2"></a-entity>

        <!-- Se agrega el plano principal-->
        <a-plane color="black" scale="50 50 1" rotation="-90 0 0" static-body position="0 -0.5 0"></a-plane> 

        <!-- Se agregan objetos para colisionar-->
        <a-plane color="red" width="7.460" height="2.680" depth="0.140" position="0.049 1.409 5" 
        static-body="shape: plane; mass: 0; halfExtents: 0.1 0.1 0.1" ></a-plane>
        
    </a-scene>    
</body>
</html>